
@{
    ViewBag.Title = "Signup";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    /*======= VALIDATOR =========*/
    .form-group.invalid .form-control {
        border-color: #f33a58;
    }

    .form-group.invalid .form-message {
        color: #f33a58;
    }

    .form-message {
        word-break: break-all;
        font-size: 0.7rem;
        line-height: 1.5rem;
        padding: 4px 0 0;
        display: block;
        word-break: normal;
        position: absolute;
        top: 37px;
        left: 7px
    }


    /*==========================*/
</style>
<div class="sign-up-section container mx-auto my-5 px-2 sm:px-8">
    <div class="mx-auto max-w-[500px] rounded-lg bg-white p-5">
        <div class="my-5">
            <img class="mx-auto" src="~/Content/images/svg/logo.svg" alt="Besnik." />
        </div>

        <form action="#" method="post" class="form dangkiform" id="form-1">
            <div class="flex flex-col gap-4 form-1">

                <div class="relative flex h-[40px] items-center form-group">
                    <i class="bi bi-person absolute ml-2 flex text-[24px] text-gray-400"></i>
                    <input class="input pl-10 form-control" id="firstname" type="text" placeholder="First Name" required />
                    <span class="form-message"></span>
                </div>

                <div class="relative flex h-[40px] items-center form-group">
                    <i class="bi bi-person absolute ml-2 flex text-[24px] text-gray-400"></i>
                    <input class="input pl-10 form-control" id="lastname" type="text" placeholder="Last Name" required />
                    <span class="form-message"></span>
                </div>

                <div class="relative flex h-[40px] items-center form-group">
                    <i class="bi bi-envelope absolute ml-2 flex text-[24px] text-gray-400"></i>
                    <input class="input pl-10 form-control" id="email" type="email" placeholder="Email" required />
                    <span class="form-message"></span>
                </div>

                <div class="relative flex h-[40px] items-center form-group">
                    <i class="bi bi-lock absolute ml-2 flex text-[24px] text-gray-400"></i>
                    <input class="input pl-10 form-control" id="password" type="password" placeholder="Password" required />
                    <span class="form-message"></span>
                </div>

                <div class="relative flex h-[40px] items-center form-group">
                    <i class="bi bi-lock-fill absolute ml-2 flex text-[24px] text-gray-400"></i>
                    <input class="input pl-10 form-control" id="password-confirmation" type="password" placeholder="Confirm Password" required />
                    <span class="form-message"></span>
                </div>

                <button class="btn-effect transition-all-300 h-full w-full rounded-lg bg-primary-color p-2" type="submit" >
                    <span class="font-bold uppercase text-white">Sign Up</span>
                </button>
            </div>
            <div class="my-2 flex items-center justify-between">
                <label class="flex select-none items-center gap-2">
                    <input class="checkbox" type="checkbox" />
                    <span class="text-gray-title">
                        I agree with all
                        <a class="underlined-animated text-[#3091ff] after:bottom-0" href="#">Terms of Use</a>
                        &
                        <a class="underlined-animated text-[#3091ff] after:bottom-0" href="#">Privacy Policy</a>.
                    </span>
                </label>
            </div>
        </form>
        <div class="mt-5 flex flex-col items-center justify-center border-t border-t-gray-400 pt-5">
            <span>Do you already have an account?</span>
            <a class="btn-effect rounded-lg bg-primary-color p-2 text-white" href="@Url.Action("Login","Account")">
                <span>Login</span>
            </a>
        </div>
    </div>
</div>
<script src="~/Content/js/validator.js"></script>
@*<script>
    //Validator({
    //    form: '#form-1',
    //    formGroupSelector: '.form-group',
    //    errorSelector: '.form-message',
    //    rules: [
    //        Validator.isRequired('#firstname'),
    //        Validator.isRequired('#lastname'),
    //        Validator.isEmail('#email'),
    //        Validator.minLength('#password', 8),
    //        Validator.isRequired('#password-confirmation'),
    //        Validator.isConfirmed('#password-confirmation', function () {
    //            return document.querySelector('#form-1 #password').value;
    //        }, 'Incorrect password. Please re-enter your password.')
    //    ],
    //});
    $('#form-1').submit(function () {
        event.preventDefault();
        dangki();
    });
    function dangki() {
        //event.preventDefault(); // Ngăn chặn sự kiện mặc định của form

        var firstname = $('#firstname').val();
        var lastname = $('#lastname').val();
        var email = $('#email').val();
        var pass = $('#password').val();
        var passconf = $('#password-confirmation').val();
        if (!firstname || !lastname || !email || !pass || !passconf) {
            alert('Vui lòng nhập đầy đủ thông tin!');
            return;
        }
        if (pass.length < 8) {
            // Mật khẩu ít hơn 8 ký tự, thực hiện xử lý tương ứng
            alert("Mật khẩu cần ít nhất 8 ký tự.");
            return;
        }
        if (pass !== passconf) {
            alert('Mật khẩu xác nhận không đúng!');
            return;
        }
        $.ajax({
            url: '/Api/Account',
            type: 'POST',
            data: { 'Email': email, 'Password': pass, 'FirstName': firstname, 'LastName': lastname },
            success: (res) => {
                if (res != null) {
                    alert('Tạo tài khoản thành công!');
                    window.location.href = `/Home/Index/?code=${res.AccountCode}`;
                }
                else alert('Email không đúng hoặc đã tồn tại!');
            },
            error: (er) => {
                console.log(er);
                alert('Đã xảy ra lỗi khi đăng ký tài khoản!');
            }
        });
    }
</script>*@

